------------------------------ MODULE vector ------------------------------
EXTENDS TLC
PT == INSTANCE PT
LOCAL INSTANCE FiniteSets
LOCAL INSTANCE Integers
LOCAL INSTANCE Sequences
LOCAL INSTANCE Naturals

\* ---------------------------------------------------------------------------
\* Constants
\* ---------------------------------------------------------------------------
CONSTANT MaxValue                   \* Max value for any process's clock

\* ---------------------------------------------------------------------------
\* Assumptions
\* ---------------------------------------------------------------------------
ASSUME MaxValue             > 0     \* Need something to increment to

\* ---------------------------------------------------------------------------
\* Variables
\* ---------------------------------------------------------------------------
VARIABLES 
    \* vector
    v

vars  == << v >>

\* ---------------------------------------------------------------------------
\* Constraints
\* ---------------------------------------------------------------------------
TypeOK ==
    /\ v = SelectSeq(v, LAMBDA k: k \in Nat)

ValueConstraint ==
    /\ Head(v) < MaxValue

Constraints ==
    /\ TypeOK
    /\ ValueConstraint

\* ---------------------------------------------------------------------------
\* ActionConstraints
\* ---------------------------------------------------------------------------
ActionConstraints ==
    /\ Len(v') > Len(v)

\* ---------------------------------------------------------------------------
\* Invariants
\* ---------------------------------------------------------------------------
Invariants ==
    \/ Len(v) < 2
    \/ \A i \in 1..(Len(v) - 1): v[i] > v[i+1]

\* ---------------------------------------------------------------------------
\* Behaviours
\* ---------------------------------------------------------------------------
Init == 
    /\ v = << 0 >>

Add == 
    /\ v' = <<(Head(v) + 1)>> \o  v

Next == Add

Spec == /\ Init /\ [][Next]_vars

=============================================================================
\* Modification History
\* Created by Todd D. Greenwood-Geer
